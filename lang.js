// â”€â”€â”€ i18n & Theme â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

export const STRINGS = {
  en: {
    app_title:         'Silent Bell',
    nav_timer:         'Timer',
    nav_log:           'Log',
    nav_settings:      'Settings',
    status_ready:      'Ready',
    status_meditating: 'Meditatingâ€¦',
    status_complete:   'Session complete ğŸ™',
    status_stopped:    'Stopped early',
    status_prepare:    'Prepareâ€¦ {secs}s',
    label_sound:       'Sound',
    label_interval:    'Interval sound every',
    sound_bell:        'Bell',
    sound_bell_high:   'Bell (Higher pitch)',
    sound_chugpi:      'Jugbi ì£½ë¹„',
    sound_silent:      'Silent',
    interval_none:     'None',
    btn_start:         'Start',
    btn_stop:          'Stop',
    btn_export:        'Export CSV',
    btn_clear:         'Clear Log',
    btn_save:          'Save',
    btn_manual:        '+ Manual',
    manual_title:      'Log Manual Session',
    settings_duration: 'Default duration (min)',
    settings_sound:    'Sound',
    settings_prepare:  'Prepare countdown (sec)',
    settings_notes:    'Session notes',
    notes_on:          'Enabled',
    notes_off:         'Disabled',
    settings_saved:    'Saved âœ“',
    log_sessions:      'Sessions',
    log_total:         'Total time',
    log_completed:     'Completed',
    log_planned:       'planned',
    log_stopped:       'âš  stopped early',
    log_manual:        'manual',
    confirm_clear:     'Clear all session history?',
    ios_install:       'To install: tap the Share button â†‘ then "Add to Home Screen"',
    log_streak:        'Streak',
    log_days:          'days',
    note_placeholder:  'Note (optional)',
    note_save:         'Save âœ“',
    manual_saved:      'Session saved.',
    manual_err_dur:    'Please enter a duration.'
  },
  pl: {
    app_title:         'Dzwon Ciszy',
    nav_timer:         'Timer',
    nav_log:           'Dziennik',
    nav_settings:      'Ustawienia',
    status_ready:      'Gotowy',
    status_meditating: 'Medytacjaâ€¦',
    status_complete:   'Sesja zakoÅ„czona ğŸ™',
    status_stopped:    'Przerwano',
    status_prepare:    'Przygotuj siÄ™â€¦ {secs}s',
    label_sound:       'DÅºwiÄ™k',
    label_interval:    'DÅºwiÄ™k co kaÅ¼de',
    sound_bell:        'Dzwon',
    sound_bell_high:   'Dzwon (WyÅ¼szy dÅºwiÄ™k)',
    sound_chugpi:      'Jugbi ì£½ë¹„',
    sound_silent:      'Cisza',
    interval_none:     'Brak',
    btn_start:         'Start',
    btn_stop:          'Stop',
    btn_export:        'Eksport CSV',
    btn_clear:         'WyczyÅ›Ä‡',
    btn_save:          'Zapisz',
    btn_manual:        '+ RÄ™czna',
    manual_title:      'Dodaj sesjÄ™ rÄ™cznie',
    settings_duration: 'DomyÅ›lny czas (min)',
    settings_sound:    'DÅºwiÄ™k',
    settings_prepare:  'Odliczanie przed startem (s)',
    settings_notes:    'Notatki sesji',
    notes_on:          'WÅ‚Ä…czone',
    notes_off:         'WyÅ‚Ä…czone',
    settings_saved:    'Zapisano âœ“',
    log_sessions:      'Sesje',
    log_total:         'ÅÄ…czny czas',
    log_completed:     'UkoÅ„czone',
    log_planned:       'zaplanowano',
    log_stopped:       'âš  przerwano',
    log_manual:        'rÄ™czna',
    confirm_clear:     'WyczyÅ›ciÄ‡ historiÄ™ sesji?',
    ios_install:       'Aby zainstalowaÄ‡: wybierz UdostÄ™pnij â†‘, potem â€Dodaj do ekranu gÅ‚Ã³wnego"',
    log_streak:        'Seria',
    log_days:          'dni',
    note_placeholder:  'Notatka (opcjonalna)',
    note_save:         'Zapisz âœ“',
    manual_saved:      'Sesja zapisana.',
    manual_err_dur:    'Podaj czas trwania.'
  },
  ko: {
    app_title:         'ì¹¨ë¬µì˜ ì¢…',
    nav_timer:         'íƒ€ì´ë¨¸',
    nav_log:           'ê¸°ë¡',
    nav_settings:      'ì„¤ì •',
    status_ready:      'ì¤€ë¹„',
    status_meditating: 'ëª…ìƒ ì¤‘â€¦',
    status_complete:   'ì„¸ì…˜ ì™„ë£Œ ğŸ™',
    status_stopped:    'ì¤‘ë‹¨ë¨',
    status_prepare:    'ì¤€ë¹„í•˜ì„¸ìš”â€¦ {secs}ì´ˆ',
    label_sound:       'ì†Œë¦¬',
    label_interval:    'ê°„ê²© ì†Œë¦¬ (ë§¤)',
    sound_bell:        'ë²”ì¢…',
    sound_bell_high:   'ë²”ì¢… (ë†’ì€ ìŒ)',
    sound_chugpi:      'ì£½ë¹„',
    sound_silent:      'ë¬´ìŒ',
    interval_none:     'ì—†ìŒ',
    btn_start:         'ì‹œì‘',
    btn_stop:          'ì •ì§€',
    btn_export:        'CSV ë‚´ë³´ë‚´ê¸°',
    btn_clear:         'ê¸°ë¡ ì‚­ì œ',
    btn_save:          'ì €ì¥',
    btn_manual:        '+ ìˆ˜ë™',
    manual_title:      'ìˆ˜ë™ ì„¸ì…˜ ê¸°ë¡',
    settings_duration: 'ê¸°ë³¸ ì‹œê°„ (ë¶„)',
    settings_sound:    'ì†Œë¦¬',
    settings_prepare:  'ì¤€ë¹„ ì¹´ìš´íŠ¸ë‹¤ìš´ (ì´ˆ)',
    settings_notes:    'ì„¸ì…˜ ë©”ëª¨',
    notes_on:          'í™œì„±í™”',
    notes_off:         'ë¹„í™œì„±í™”',
    settings_saved:    'ì €ì¥ë¨ âœ“',
    log_sessions:      'ì„¸ì…˜',
    log_total:         'ì „ì²´ ì‹œê°„',
    log_completed:     'ì™„ë£Œ',
    log_planned:       'ê³„íš',
    log_stopped:       'âš  ì¤‘ë‹¨ë¨',
    log_manual:        'ìˆ˜ë™',
    confirm_clear:     'ëª¨ë“  ì„¸ì…˜ ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
    ios_install:       'ì„¤ì¹˜í•˜ë ¤ë©´: ê³µìœ  ë²„íŠ¼ì„ íƒ­í•œ í›„ "í™ˆ í™”ë©´ì— ì¶”ê°€"ë¥¼ ì„ íƒí•˜ì„¸ìš”',
    log_streak:        'ì—°ì†',
    log_days:          'ì¼',
    note_placeholder:  'ë©”ëª¨ (ì„ íƒ)',
    note_save:         'ì €ì¥ âœ“',
    manual_saved:      'ì„¸ì…˜ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.',
    manual_err_dur:    'ì‹œê°„ì„ ì…ë ¥í•˜ì„¸ìš”.'
  }
};

export let currentLang  = localStorage.getItem('lang')  || 'en';
export let currentTheme = localStorage.getItem('theme') || 'dark';

export function t(key) {
  return (STRINGS[currentLang] && STRINGS[currentLang][key])
      || (STRINGS['en']        && STRINGS['en'][key])
      || key;
}

export function applyLang() {
  document.documentElement.lang = currentLang;
  document.querySelectorAll('[data-i18n]').forEach(function(el) {
    el.textContent = t(el.dataset.i18n);
  });
  document.querySelectorAll('[data-i18n-placeholder]').forEach(function(el) {
    el.placeholder = t(el.dataset.i18nPlaceholder);
  });
  var allLangs   = ['en', 'pl', 'ko'];
  var otherLangs = allLangs.filter(function(l) { return l !== currentLang; });
  var langDisplay = { en: 'EN', pl: 'PL', ko: 'í•œ' };
  document.querySelectorAll('.btn-lang').forEach(function(btn, i) {
    btn.dataset.lang = otherLangs[i];
    btn.textContent  = langDisplay[otherLangs[i]];
  });
}

export function applyTheme() {
  document.documentElement.setAttribute('data-theme', currentTheme);
  document.getElementById('btn-theme').textContent = currentTheme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
  var meta = document.querySelector('meta[name="theme-color"]');
  if (meta) meta.content = currentTheme === 'dark' ? '#111820' : '#f0ece4';
}

export function setLang(lang) {
  currentLang = lang;
  localStorage.setItem('lang', lang);
}

export function setTheme(theme) {
  currentTheme = theme;
  localStorage.setItem('theme', theme);
}
